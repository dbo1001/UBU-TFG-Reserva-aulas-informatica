\apendice{Documentación de usuario}

\section{Introducción}
En este apartado se explican los pasos a seguir por un usuario que quiere descargarse y utilizar la aplicación.
\section{Requisitos de usuarios}
Para poder utilizar la aplicación, el usuario tendrá que tener instalado Python. 
\section{Instalación}
Los pasos de la instalación para la ejecución de la aplicación son los mismos que se han explicado en el manual del programador. A continuación se explican las formas en las que se puede acceder al proyecto.\newline
Para el acceso de un usuario a la aplicación web, solamente necesita acceder al enlace en el que está subida dicha aplicación en Azure:\newline
\url{https://reservaaulas.azurewebsites.net}.
\newline
Lo único que se necesita es que el \textit{app service} en el que está realizado el deploy este ejecutándose y la base de datos de Azure activa. Estas acciones se explican a continuación:\newline
\begin{itemize}
    \item Acceder a \url{https://portal.azure.com/#home} con la cuenta  desde la que se registraron los servicios. Se muestra una página como la siguiente:\newline
    \imagen{ActivarServicios1}{Página portal de Azure.}
    \item Entrar en el app service llamado 'reservaAulas' y pinchar en el botón de la parte superior de 'Activar' o de 'reiniciar'.\newline
    \imagen{ActivarServicios2}{Activar app service}
    \item La base de datos se mantiene siempre activa para poder trabajar con la aplicación sin problemas.
\end{itemize}
Una vez se han seguido esos pasos, se asegura que el proyecto funcione ejecutándose desde la URL (https://reservaaulas.azurewebsites.net).
Para que esto funcione, fue necesario realizar un despliegue en un servicio de aplicación de Azure que se explica a continuación:\newline
\begin{itemize}
    \item Lo primero que se necesita es una suscripción a Azure, en mi caso utilicé la suscripción de estudiante, que me proporcionaba 100USD para realizar pruebas, aunque se agotaría el saldo y hubo que cambiar de plan de coste.
    \item Se necesita también un entorno de Python.
    \item Una vez tenemos los primeros requisitos, hay que crear un fichero 'requirements.txt' en el que se guarden las dependencias de la aplicación.
    \item Crear una instancia de un app service en Azure.
    \item Establecemos el comando de inicio al que nos indica Azure para el funcionamiento, almacenado en 'startup.txt' que es el siguiente:\newline \textit{\textbf{gunicorn --bind=0.0.0.0 --timeout 600 startup:app}}
    \item Realizar el despliegue, en el caso de este proyecto se hizo desde VSCode, mediante la extensión de 'Azure: app service'. Para esto, se inició sesión con Azure en dicha extensión, ahí se muestran los app services dónde se puede realizar el despliegue y se selecciona el creado anteriormente.
\end{itemize}
Esta explicación se puede ver más detallada en el manual proporcionado por Microsoft del siguiente enlace \cite{deployVSCode}.\newline
Como se puede ver se crean los ficheros y la estructura según pide Microsoft y VSCode a lo largo del proyecto, por lo que el proyecto está creado para ser ejecutado en este entorno y servidor.


\section{Manual del usuario}
A continuación se explicará como realizar las operaciones que proporciona esta aplicación:
\subsection{Inicio de la aplicación}
Para comenzar a utilizar la aplicación se puede hacer de dos formas:
\begin{itemize}
    \item Sin inicio de sesión (como invitado) que puede ver las reservas realizadas sobre las aulas y las aulas existentes. Para ello, hay que pinchar en el botón de 'Comience a usar la app' de la página principal (ver figura \ref{fig:InicioSesion1}).
    \item Iniciando sesión con Outlook. Pinchando sobre el botón de 'Iniciar sesión desde Outlook' e introduciendo los datos de una cuenta de Microsoft (ver figura \ref{fig:InicioSesion1}).
\end{itemize}
\imagen{InicioSesion1}{Página principal.}
\subsection{Consultar ocupación de aulas}
Pasos para consultar la ocupación de un aula:
\begin{itemize}
    \item Pinchar en el botón de 'Consultar ocupación de aulas'
    \item Escoger el edificio en el que se encuentra el aula que se quiere comprobar(ver figura \ref{fig:ConsultarEventos1}).
    \item Se muestra un formulario en el que aparecen dos opciones (ver figura \ref{fig:ConsultarEventos2}):
    \begin{itemize}
        \item Seleccionar un aula y rellenar al menos los campos obligatorios para filtrar las horas y fechas de las reservas a mostrar de ese aula.
        \item Seleccionar 'Cualquiera' en la opción del aula y rellenar al menos los campos obligatorios. Esto filtrará todas las aulas de ese edificio según las fechas especificadas. Además se pueden rellenar los campos opcionales de 'Capacidad', 'Numero de ordenadores' o 'Tipo' para filtrar las aulas según esas características.
    \end{itemize}
    \item Pinchar en el botón 'Enviar consulta' y se mostrarán los eventos que coincidan en una tabla (ver figura \ref{fig:ConsultarEventos3}).
\end{itemize}
\imagen{ConsultarEventos1}{Página inicial para ver eventos de aulas.}
\imagen{ConsultarEventos2}{Formulario para consultar eventos.}
\imagen{ConsultarEventos3}{Tabla donde se muestran los eventos.}

\subsection{Modificar eventos}
Para modificar eventos, es necesario acceder previamente a la página de la consulta de eventos que se ha explicado en la sección anterior, una vez ahí:
\begin{itemize}
    \item Se pulsa en el botón 'Modificar' de la parte derecha de la tabla (ver figura \ref{fig:ModificarEventos1}).
    \item Se abre un formulario en la parte superior de la página en la que se muestran los datos del evento seleccionado y se puede modificar. Una vez modificado si se pincha en 'Modificar' se guardan los cambios (ver figura \ref{fig:ModificarEventos2}).
\end{itemize}
\imagen{ModificarEventos1}{Página inicial para ver eventos de aulas y modificarlos.}
\imagen{ModificarEventos2}{Formulario para modificar eventos.}

\subsection{Borrar eventos}
Para borrar eventos, hay que acceder primero a la página de la consulta de eventos que se ha explicado anteriormente, una vez ahí:
\begin{itemize}
    \item Se pula en el botón 'Seleccione para borrar' de la parte derecha de la tabla de los eventos que se quieren borrar (ver figura \ref{fig:ModificarEventos1}).
    \item Se resaltan en rojo estos eventos seleccionados (ver figura \ref{fig:BorrarEventos2}).
    \item Se pincha en el botón de la parte inferior de la página de 'Borrar eventos seleccionados' y sale un cuadro de diálogo en el que se pide la confirmación para borrar (ver figura \ref{fig:BorrarEventos3}). Si se acepta, se borran los eventos seleccionados.
\end{itemize}
\imagen{ModificarEventos1}{Página inicial para ver eventos de aulas y borrarlos.}
\imagen{BorrarEventos2}{Selección de eventos a borrar.}
\imagen{BorrarEventos3}{Confirmación de borrado.}

\subsection{Realizar reserva}
Pasos a seguir para realizar la reserva de un aula:
\begin{itemize}
    \item Seleccionar en el formulario de la izquierda los valores deseados y pinchar en el botón 'Consultar' (ver figura \ref{fig:Reservar1}). Esto rellena la columna de la derecha el desplegable de 'Selecciona aula'.
    \item Elegir un tipo de reserva y pinchar en 'Aplicar'. Varía el número de campos a rellenar.
    \item Completar la información pedida sobre la reserva en la parte derecha (ver figura \ref{fig:Reservar2}).
\end{itemize}
\imagen{Reservar1}{Pantalla inicial de la reserva.}
\imagen{Reservar2}{Pantalla completa antes de la reserva.}

\subsection{Modificar aulas}
Pasos a seguir para realizar la modificación de un aula:
\begin{itemize}
    \item Acceder a la ventana de 'Ver/modificar aulas'.
    \item Seleccionar un grupo de aulas en el que estará el aula que queremos modificar. Se mostrará una tabla con todas las aulas de dicho grupo (ver figura \ref{fig:Modificar1}).
    \item Seleccionar el botón 'Editar', se abrirá un formulario en la parte superior para poder editar los datos del aula. Una vez editados pinchar en el botón 'Guardar'. (ver figura \ref{fig:Modificar2}).
\end{itemize}
\imagen{Modificar1}{Pantalla inicial de la modificación.}
\imagen{Modificar2}{Pantalla completa antes de la modificación.}

\subsection{Añadir aulas}
Pasos a seguir para añadir un aula:
\begin{itemize}
    \item Acceder a la ventana de 'Añadir aulas'.
    \item Rellenar el formulario que se presenta indicando los datos pedidos. Pinchar en 'crear aula'.
    \imagen{AñadirAulas}{Pantalla para añadir un aula.}
    \item Una vez se ha añadido el aula, se accede a los calendarios de Outlook y se asignan los permisos manualmente al responsable correspondiente de este nuevo aula.
\end{itemize}

\subsection{Ver auditorías}
Para ver la tabla de las auditorías, que muestra los cambios realizados sobre las reservas de todos los calendarios, hay que ser administrador y pinchar en el botón de 'Ver auditorías'.
\imagen{Auditorias}{Pantalla para ver la tabla de auditorías.}

\subsection{Modificar propietario}
Pasos a seguir para modificar un propietario:
\begin{itemize}
    \item Acceder a la ventana de 'Ver propietarios'.
    \item Se muestra una tabla con los propietarios existentes y un botón de 'Editar' a su derecha (ver figura \ref{fig:ModificarPropietario1}).
    \item Aparecerá un formulario en la parte superior de la página con los datos del propietario a editar, ahí se podrá modificar y pinchar en el botón 'Modificar' para guardar los cambios (ver figura \ref{fig:ModificarPropietario2}).

    \imagen{ModificarPropietario1}{Pantalla inicial de la modificación de propietario.}
    \imagen{ModificarPropietario2}{Pantalla completa antes de la modificación.}
    \item Una vez se ha modificado el propietario, si se ha cambiado el responsable, se accede a los calendarios de Outlook y se asignan los permisos manualmente al responsable correspondiente después de la modificación.
\end{itemize}
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="static/js/filtrarReservas.js"></script>
  </head>
  <body>
    <form name="filterAulas" id="filterAulas" method="POST">
        {{ form1.csrf_token }}
        <div>{{ form1.capacidad.label }}</div>
        <div>{{ form1.capacidad }}</div>
        <div>{{ form1.edificio.label }}</div>
        <div>{{ form1.edificio }}</div>
        <div>{{ form1.tipo.label }}</div>
        <div>{{ form1.tipo }}</div>
        <meta name="csrf-token" content="{{ csrf_token() }}">
        <button type='button' id ='enviarFiltros'>Consultar</button>
        
    </form>
    <div id='siguienteForm'></div>
   

  </body>

  <script>
    
    $('#enviarFiltros').click(function(){
      arrayValores = $('#filterAulas').serialize();
      capacidad =  $('#capacidad').val();
      edificio = $('#edificio').val();
      tipo = $('#tipo').val();
      var csrftoken = $('meta[name=csrf-token]').attr('content')
      $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken)
            }
        }
      })
      $.ajax({
        type: "POST",
        url: "/showReservar",
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({capacidad: capacidad, edificio: edificio, tipo: tipo}),
        success: function(response) {
         // success: window.open('reservar?response=response', '_blank')
          $("#siguienteForm").load('filtrarReservas',response = response);
         },
        //success: window.open('reservar', '_blank')
    });
    });
  </script>
</html>